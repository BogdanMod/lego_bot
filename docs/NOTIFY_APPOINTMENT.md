# Уведомление клиенту при confirm / slot_busy

## Когда отправляется

Уведомление клиенту в Telegram отправляется **всегда** в двух случаях:

1. **При успешном подтверждении записи (CONFIRMED)** — независимо от `booking_mode` (в т.ч. при `booking_mode='none'`).
2. **При ответе API 409 slot_busy** — «Слот уже занят».

Вызов из Core в Router выполняется fire-and-forget (без ожидания ответа в основном потоке).

## Чеклист проверки

- [ ] При confirm записи (любой режим, в т.ч. без слотов) клиент получает в Telegram сообщение «Ваша запись подтверждена ✅» (если есть `telegram_user_id`).
- [ ] При 409 slot_busy клиент получает сообщение «К сожалению, это время уже занято ❌…».
- [ ] Endpoint Router: `POST /internal/owner/notify-appointment` защищён: без `INTERNAL_API_TOKEN` в env возвращается 503; без заголовка `X-Internal-Token` или при неверном токене — 401.
- [ ] Core вызывает Router с заголовком `X-Internal-Token` и таймаутом ~2.5–3 с; ошибки только логируются.
