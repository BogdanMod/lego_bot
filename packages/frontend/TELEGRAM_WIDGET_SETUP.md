# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Login Widget

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Telegram Login Widget –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

## üìã –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –≤ @BotFather

### 1.1 –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@BotFather`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π `/start`

### 1.2 –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@legobusiness1_bot`)

### 1.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Bot Settings

1. –ù–∞–∂–º–∏—Ç–µ **"Bot Settings"** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞)
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Domain"** (–î–æ–º–µ–Ω)

### 1.4 –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω

1. –í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:
   - –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `localhost` (–Ω–æ –≤–∏–¥–∂–µ—Ç –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ localhost)
   - –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `your-frontend.vercel.app`)

2. –ù–∞–∂–º–∏—Ç–µ **"Set"** (–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)

**–ü—Ä–∏–º–µ—Ä:**
```
–í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω: your-frontend.vercel.app
```

## üåê –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram Login Widget –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Telegram. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok/tunneling

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
   ```bash
   cd packages/frontend
   python3 -m http.server 8000
   ```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É–Ω–Ω–µ–ª—è:
   ```bash
   ngrok http 8000
   ```

3. –ü–æ–ª—É—á–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

4. –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç URL –≤ @BotFather –∫–∞–∫ –¥–æ–º–µ–Ω

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ frontend –Ω–∞ Vercel (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å preview deployments)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL –≤ @BotFather

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ Telegram Login Widget –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞:

```html
<!-- –í packages/frontend/index.html -->
<button onclick="testLogin()">–í–æ–π—Ç–∏ (—Ç–µ—Å—Ç)</button>

<script>
function testLogin() {
  // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  onTelegramAuth({
    id: 123456789,
    first_name: 'Test',
    last_name: 'User',
    username: 'testuser',
    hash: 'test_hash'
  });
}
</script>
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω (Vercel/Netlify)

1. **–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ frontend:**
   ```bash
   cd packages/frontend
   vercel
   ```

2. **–ü–æ–ª—É—á–∏—Ç–µ URL:**
   - –ü—Ä–∏–º–µ—Ä: `https://your-app.vercel.app`

3. **–î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ @BotFather:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather
   - `/mybots` ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí `Bot Settings` ‚Üí `Domain`
   - –í–≤–µ–¥–∏—Ç–µ: `your-app.vercel.app` (–±–µ–∑ `https://`)

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏–¥–∂–µ—Ç –≤ HTML

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `packages/frontend/index.html` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username –±–æ—Ç–∞:

```html
<div id="telegram-login" 
     data-telegram-login="legobusiness1_bot" 
     data-size="large" 
     data-onauth="onTelegramAuth(user)" 
     data-request-access="write">
</div>
```

**–í–∞–∂–Ω–æ:**
- Username –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ `@`
- –î–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º, —á—Ç–æ —É–∫–∞–∑–∞–Ω –≤ @BotFather
- –°–∫—Ä–∏–ø—Ç –≤–∏–¥–∂–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–∂–µ—Ç–∞

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –í–∏–¥–∂–µ—Ç –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ–º–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ @BotFather –∏–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º –¥–æ–º–µ–Ω–æ–º.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ @BotFather
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º URL
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –û—à–∏–±–∫–∞ "Invalid domain"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–º–µ–Ω—É –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–æ–º–µ–Ω–∞ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–¥–æ–º–µ–Ω—ã)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (HTTP/HTTPS)
3. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Vercel, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–µ preview URL)

### –í–∏–¥–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ localhost

**–ü—Ä–∏—á–∏–Ω–∞:** Telegram –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `localhost` –¥–ª—è Login Widget.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –∏–ª–∏ –¥—Ä—É–≥–æ–π tunneling —Å–µ—Ä–≤–∏—Å
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Vercel preview deployment
3. –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –≤—Ö–æ–¥ (—Å–º. –í–∞—Ä–∏–∞–Ω—Ç 3 –≤—ã—à–µ)

### –í–∏–¥–∂–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π callback –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π hash.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `onTelegramAuth` –≤ `script.js`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `verifyTelegramAuth` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

## üìù –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] –û—Ç–∫—Ä—ã—Ç @BotFather –≤ Telegram
- [ ] –í—ã–±—Ä–∞–Ω –±–æ—Ç —á–µ—Ä–µ–∑ `/mybots`
- [ ] –û—Ç–∫—Ä—ã—Ç —Ä–∞–∑–¥–µ–ª `Bot Settings` ‚Üí `Domain`
- [ ] –î–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
- [ ] Username –±–æ—Ç–∞ —É–∫–∞–∑–∞–Ω –≤ `index.html` (–±–µ–∑ `@`)
- [ ] –°–∫—Ä–∏–ø—Ç Telegram Widget –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ API —Å–µ—Ä–≤–µ—Ä–µ
- [ ] `FRONTEND_URL` –≤ `.env` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –¥–æ–º–µ–Ω–æ–º frontend

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ hash –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ hash –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```javascript
// –í packages/core/src/index.ts
function verifyTelegramAuth(authData: any, hash: string): boolean {
  const botToken = process.env.TELEGRAM_BOT_TOKEN;
  if (!botToken) return false;

  const dataCheckString = Object.keys(authData)
    .sort()
    .map(key => `${key}=${authData[key]}`)
    .join('\n');

  const secretKey = crypto
    .createHmac('sha256', 'WebAppData')
    .update(botToken)
    .digest();

  const calculatedHash = crypto
    .createHmac('sha256', secretKey)
    .update(dataCheckString)
    .digest('hex');

  return calculatedHash === hash;
}
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Telegram Login Widget Documentation](https://core.telegram.org/widgets/login)
- [@BotFather Documentation](https://core.telegram.org/bots/api#getme)
- [Telegram Bot API](https://core.telegram.org/bots/api)

## üí° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞:

1. –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –≤–∏–¥–∂–µ—Ç
2. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞ (—Å–º. –í–∞—Ä–∏–∞–Ω—Ç 3 –≤—ã—à–µ)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞ –≤–∫–ª—é—á–∏—Ç–µ –≤–∏–¥–∂–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ

